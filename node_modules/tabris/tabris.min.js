!function(){function t(t,e){this.trigger(e,this,t)}function e(t){this._listen("patchInstall",!1);var e=this._pendingPatchCallback;if(delete this._pendingPatchCallback,"function"==typeof e)if(t.error)e(new Error(t.error));else try{var i=t.success?JSON.parse(t.success):null;e(null,i)}catch(r){e(new Error("Failed to parse patch.json"))}}function i(t){return t.split(/\/+/).map(function(t){if(".."===t)throw new Error("Path must not contain '..'");return"."===t?"":t}).filter(function(t){return!!t}).join("/")}delete window.Promise,require("./polyfill.min.js");var r={extend:function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)t[r]=i[r]}return t},pick:function(t,e){var i={};for(var r in t)-1!==e.indexOf(r)&&(i[r]=t[r]);return i},omit:function(t,e){var i={};for(var r in t)-1===e.indexOf(r)&&(i[r]=t[r]);return i},drop:function(t,e){return Array.prototype.slice.call(t,arguments.length>1?e:1)},clone:function(t){var e={};for(var i in t)e[i]=t[i];return e},rename:function(t,e){var i={};for(var r in t)i[e[r]||r]=t[r];return i},invert:function(t){var e={};for(var i in t)e[t[i]]=i;return e},extendPrototype:function(t,e){var i=function(){};return i.prototype=t.prototype,r.extend(new i,e,{_super:function(e,i){return t.prototype[e].apply(this,i)}})}};!function(){r.colorArrayToString=function(t){var e=t[0],i=t[1],r=t[2],n=3===t.length?1:Math.round(100*t[3]/255)/100;return"rgba("+e+", "+i+", "+r+", "+n+")"},r.colorStringToArray=function(e){if("transparent"===e)return[0,0,0,0];if(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/.test(e))return[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),255];if(/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/.test(e))return[17*parseInt(RegExp.$1,16),17*parseInt(RegExp.$2,16),17*parseInt(RegExp.$3,16),255];if(/^rgb\s*\(\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*\)$/.test(e))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),255];if(/^rgba\s*\(\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?([0-9]*\.)?[0-9]+)\s*\)$/.test(e))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),Math.round(255*Math.max(0,Math.min(1,parseFloat(RegExp.$4))))];if(e in t){var i=t[e];return[i[0],i[1],i[2],255]}throw new Error("invalid color: "+e)};var t={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]}}(),function(){function t(t,e){var r=e.trim().split(/\s+/);i(r.length<=2,"Too many font styles"),r.forEach(function(e){switch(e.trim()){case"italic":i(t[3]===!1,"Invalid font variant"),t[3]=!0;break;case"bold":i(t[2]===!1,"Invalid font weight"),t[2]=!0;break;case"normal":case"":break;default:throw new Error("Unknown font property: "+e.trim())}})}function e(t,e){(e?e.split(","):[]).forEach(function(e){var r=/(?:^\s*[^\"\']+\s*$)|(?:^\s*\"[^\"\']+\"\s*$)|(?:^\s*\'[^\"\']+\'\s*$)/.exec(e);i(r,"Invalid font family: "+e),t[0].push(/^\s*[\"\']?([^\"\']*)/.exec(e)[1].trim())})}function i(t,e){if(!t)throw new Error(e)}r.fontStringToArray=function(r){var n=[[],0,!1,!1],s=r.split(/(?:\s|^)\d+px(?:\s|$)/);return i(2===s.length||1===s.length,"Invalid font syntax"),n[1]=parseInt(/(?:\s|^)(\d+)px(?:\s|$)/.exec(r)[1],10),t(n,s[0]),e(n,s[1]),n},r.fontArrayToString=function(t){return(t[3]?"italic ":"")+(t[2]?"bold ":"")+(t[1]+"px")+(t[0][0]?" ":"")+t[0].join(", ")}}(),function(){function t(t){return null!=t?t:null}r.imageToArray=function(e){return[e.src,t(e.width),t(e.height),t(e.scale)]},r.imageFromArray=function(t){var e={src:t[0]};return t[1]&&(e.width=t[1]),t[2]&&(e.height=t[2]),t[3]&&(e.scale=t[3]),e}}(),function(t){function e(t){var e=t;if("string"==typeof t?e=tabris.PropertyTypes[t]:Array.isArray(t)&&(e=tabris.PropertyTypes[t[0]]),"object"!=typeof e)throw new Error("Can not find property type "+t);if(Array.isArray(t)){e=r.clone(e);var n=t.slice(1);e.encode&&(e.encode=i(e.encode,n)),e.decode&&(e.decode=i(e.decode,n))}return e}function i(t,e){return function(i){return t.apply(window,[i].concat(e))}}function n(t,e,i){this._nativeSet(t,e),this.constructor._properties[t].nocache?this._triggerChangeEvent(t,e,i):this._storeProperty(t,e,i)}function s(t){var e=this._getStoredProperty(t);return void 0===e&&(e=this._nativeGet(t)),e}function o(t){var e={};for(var i in t){var r=t[i].name;e[r]=i}return e}function a(t){var e=l[t];return e instanceof Object?r.clone(e):e}window.tabris=t.exports=r.extend(function(t){if(!tabris._proxies[t])throw new Error("No native object with cid "+t);return tabris._proxies[t]},{_loadFunctions:[],_proxies:{},_ready:!1,load:function(t){tabris._ready?t.call():tabris._loadFunctions.push(t)},create:function(t,e){if(!(t in tabris))throw new Error("Unknown type "+t);return new tabris[t](e||{})},registerType:function(t,e,i){if(t in tabris)throw new Error("Type already registered: "+t);tabris[t]=function(e){if(!(this instanceof tabris[t]))throw new Error("Cannot call constructor as a function");if(tabris[t]._cid)tabris.Proxy.call(this,tabris[t]._cid);else{if(!tabris._nativeBridge)throw new Error("tabris.js not started");tabris.Proxy.call(this),this._create(e||{})}};for(var n in l)tabris[t][n]=e[n]||a(n);tabris[t]._events=c(tabris[t]._events),tabris[t]._properties=u(tabris[t]._properties),tabris[t]._trigger=o(tabris[t]._events);var s=r.omit(e,Object.keys(l));s.type=t,s.constructor=tabris[t],tabris[t].prototype=r.extendPrototype(i||tabris.Proxy,s)},version:"1.7.0",_init:function(t){tabris.off(),tabris._off(),tabris._client=t,tabris._nativeBridge=new tabris.NativeBridge(t);for(var e=0;e<tabris._loadFunctions.length;)tabris._loadFunctions[e++].call();tabris._ready=!0},_setEntryPoint:function(t){this._entryPoint=t},_notify:function(t,e,i){var r;try{var n=tabris._proxies[t];if(n)try{r=n._trigger(e,i)}catch(s){console.error(s),console.log(s.stack)}tabris.trigger("flush")}catch(o){console.error(o),console.log(o.stack)}return r},_reset:function(){this._loadFunctions=[],this._proxies={}}});var c=tabris.registerType.normalizeEventsMap=function(t){var e={};for(var i in t){var r=t[i];e[i]="object"==typeof r?r:{},e[i].name||(e[i].name="string"==typeof r?r:i),e[i].alias&&(e[i].originalName=i,e[e[i].alias]=e[i])}return e},u=tabris.registerType.normalizePropertiesMap=function(t){var i={};for(var r in t){var o=t[r];o===!0&&(console.warn("A custom component uses deprecated property type value 'true'"),o="any");var a="string"==typeof o||Array.isArray(o);i[r]={type:e((a?o:o.type)||"any"),"default":o["default"],nocache:o.nocache,access:{set:o.access&&o.access.set||n,get:o.access&&o.access.get||s}}}return i},l={_events:{},_initProperties:{},_type:null,_cid:null,_properties:{},_supportsChildren:!1}}("undefined"!=typeof module?module:{}),function(){tabris.NativeBridge=function(t){this._bridge=t,this._operations=[],this._currentOperation={id:null},tabris._on("flush",this.flush,this)},tabris.NativeBridge.prototype={create:function(t,e){var i={};this._operations.push(["create",t,e,i]),this._currentOperation={id:t,properties:i}},set:function(t,e,i){if(this._currentOperation.id===t)this._currentOperation.properties[e]=i;else{var r={};r[e]=i,this._operations.push(["set",t,r]),this._currentOperation={id:t,properties:r}}},listen:function(t,e,i){this._operations.push(["listen",t,e,i]),this._currentOperation={id:null}},destroy:function(t){this._operations.push(["destroy",t]),this._currentOperation={id:null}},get:function(t,e){return this.flush(),this._bridge.get(t,e)},call:function(t,e,i){return this.flush(),this._bridge.call(t,e,i)},flush:function(){tabris.Layout.flushQueue();var t=this._operations;this._operations=[],this._currentOperation={id:null};for(var e=t.length,i=0;e>i;i++){var r=t[i];switch(r[0]){case"create":this._bridge.create(r[1],r[2],r[3]);break;case"set":this._bridge.set(r[1],r[2]);break;case"listen":this._bridge.listen(r[1],r[2],r[3]);break;case"destroy":this._bridge.destroy(r[1])}}}}}(),tabris.Events={on:function(t,e,i){return this._on(t,e,i,!0)},off:function(t,e,i){return this._off(t,e,i,!0)},_on:function(t,e,i,r){this._checkDisposed();var n=r?"_callbacks":"_privateCallbacks",s=this._isListening(t);return this[n]||(this[n]=[]),this[n][t]=(this[n][t]||[]).concat([{fn:e,ctx:i}]),s||this._listen(t,!0),this},_off:function(t,e,i,r){this._checkDisposed();var n=r?"_callbacks":"_privateCallbacks";if(this[n])if(t){if(t in this[n])if(e){for(var s=this[n][t].concat(),o=s.length-1;o>=0;o--)s[o].fn!==e&&s[o].fn._callback!==e||i&&s[o].ctx!==i||s.splice(o,1);0===s.length?(delete this[n][t],0===Object.keys(this[n]).length&&delete this[n]):this[n][t]=s}else delete this[n][t]}else delete this[n];return this._isListening(t)||this._listen(t,!1),this},once:function(t,e,i){this._checkDisposed();var r=this,n=function(){r._isDisposed||r.off(t,n,i),e.apply(this,arguments)};return n._callback=e,this.on(t,n,i)},trigger:function(t){if(!this._isDisposed){var e=Array.prototype.slice.call(arguments,1);this._callAll(t,e,!1),this._callAll(t,e,!0)}return this},_callAll:function(t,e,i){var r=i?"_callbacks":"_privateCallbacks";if(this[r]&&t in this[r])for(var n=this[r][t],s=0;s<n.length;s++){var o=n[s];o.fn.apply(o.ctx||this,e)}},_isListening:function(t){return!!this._callbacks&&(!t||t in this._callbacks)||!!this._privateCallbacks&&(!t||t in this._privateCallbacks)},_checkDisposed:function(){},_listen:function(){}},r.extend(tabris,tabris.Events),function(){function t(t){var i=t.split(/\s+/);return i[1]=parseFloat(i[1]),e(i)}function e(t){if(2!==t.length)throw new Error("list length must be 2");var e=t[0],i=t[1];if(c(e))e=parseInt(e);else if(!u(e)&&!l(e))throw new Error("first element must be a percentage or a widget reference");if(!u(i))throw new Error("second element must be a number");return 0===e?i:[e,i]}function i(t){return 0===t[0]?t[1]:0===t[1]?u(t[0])?t[0]+"%":t[0]:[u(t[0])?t[0]+"%":t[0],t[1]]}function n(t,e){return Array.isArray(t)?s(t,e):u(t)?t:o(t,e)}function s(t,e){return u(t[0])?t:[o(t[0],e),t[1]]}function o(t,e){if("prev()"===t){var i=h(e).children(),r=i.indexOf(e);return r>0?tabris.PropertyTypes.proxy.encode(i[r-1])||0:0}if("string"==typeof t){var n=h(e).children(t)[0];return tabris.PropertyTypes.proxy.encode(n)||0}return tabris.PropertyTypes.proxy.encode(t)||0}function a(t){return"string"==typeof t&&-1!==t.indexOf(" ")}function c(t){return"string"==typeof t&&"%"===t[t.length-1]&&!isNaN(parseInt(t))}function u(t){return"number"==typeof t&&isFinite(t)}function l(t){return t instanceof tabris.Proxy?!0:"string"==typeof t?"prev()"===t||f.test(t):!1}function h(t){return t.parent()||g}tabris.Layout={checkConsistency:function(t){var e=t;return"centerX"in e&&("left"in e||"right"in e)&&(console.warn("Inconsistent layoutData: centerX overrides left and right"),e=r.omit(e,["left","right"])),"baseline"in e?("top"in e||"bottom"in e||"centerY"in e)&&(console.warn("Inconsistent layoutData: baseline overrides top, bottom, and centerY"),e=r.omit(e,["top","bottom","centerY"])):"centerY"in e&&("top"in e||"bottom"in e)&&(console.warn("Inconsistent layoutData: centerY overrides top and bottom"),e=r.omit(e,["top","bottom"])),"left"in e&&"right"in e&&"width"in e&&(console.warn("Inconsistent layoutData: left and right are set, ignore width"),e=r.omit(e,["width"])),"top"in e&&"bottom"in e&&"height"in e&&(console.warn("Inconsistent layoutData: top and bottom are set, ignore height"),e=r.omit(e,["height"])),e},encodeLayoutData:function(t){var e={};for(var i in t)if(null!=t[i]){if(!(i in p))throw new Error("Invalid key '"+i+"' in layoutData");try{e[i]=p[i](t[i])}catch(r){throw new Error("Invalid value for '"+i+"': "+r.message)}}return e},encodeEdge:function(i){if(a(i))return t(i);if(Array.isArray(i))return e(i);if(u(i))return i;if(c(i)){var r=parseInt(i);return 0===r?0:[r,0]}if(l(i))return[i,0];throw new Error("invalid type")},encodeSize:function(t){if(!u(t))throw new Error("must be a number");return t},encodeRef:function(t){if(!l(t))throw new Error("must be a widget reference");return t},decodeLayoutData:function(t){if(!t)return null;var e={};for(var i in t)e[i]=tabris.Layout.decodeAttribute(t[i]);return e},decodeAttribute:function(t){return Array.isArray(t)?i(t):t},resolveReferences:function(t,e){if(!e)return t;var i={};for(var r in t)i[r]=n(t[r],e);return i},addToQueue:function(t){d[t.cid]=t},flushQueue:function(){for(var t in d)d[t]._flushLayout();d={}}};var d={},p={width:tabris.Layout.encodeSize,height:tabris.Layout.encodeSize,left:tabris.Layout.encodeEdge,right:tabris.Layout.encodeEdge,top:tabris.Layout.encodeEdge,bottom:tabris.Layout.encodeEdge,centerX:tabris.Layout.encodeSize,centerY:tabris.Layout.encodeSize,baseline:tabris.Layout.encodeRef},f=/^(\*|([#.]?[A-Za-z0-9_-]+))$/,g={children:function(){return[]}}}(),function(){function t(t){return t instanceof Function?t():t}tabris.Properties={set:function(t,e,i){return this._checkDisposed(),"string"==typeof t?this._setProperty(t,e,i||{}):this._setProperties(t,e||{}),this},get:function(t){this._checkDisposed();var e=this._getPropertyGetter(t)||this._getStoredProperty,i=e.call(this,t);return this._decodeProperty(this._getTypeDef(t),i)},_setProperties:function(t,e){for(var i in t)this._setProperty(i,t[i],e)},_setProperty:function(t,e,i){var r,n=this._getTypeDef(t);try{r=this._encodeProperty(n,e)}catch(s){return void console.warn(this.toString()+': Ignored unsupported value for property "'+t+'": '+s.message)}var o=this._getPropertySetter(t)||this._storeProperty;o.call(this,t,r,i)},_storeProperty:function(t,e,i){var r=this._getStoredProperty(t);e!==r&&(void 0===e&&this._props?delete this._props[t]:(this._props||(this._props={}),this._props[t]=e),this._triggerChangeEvent(t,e,i))},_getStoredProperty:function(t){var e=this._props?this._props[t]:void 0;return void 0===e&&(e=this._getDefaultPropertyValue(t)),e},_getTypeDef:function(t){var e=this.constructor._properties[t];return e?e.type:null},_getDefaultPropertyValue:function(e){var i=this.constructor._properties[e];return i?t(i["default"]):void 0},_encodeProperty:function(t,e){return t&&t.encode?t.encode(e):e},_decodeProperty:function(t,e){return t&&t.decode?t.decode(e):e},_getPropertyGetter:function(t){var e=this.constructor._properties[t];return e&&e.access?e.access.get:void 0},_getPropertySetter:function(t){var e=this.constructor._properties[t];return e&&e.access?e.access.set:void 0},_triggerChangeEvent:function(t,e,i){var r=this._getTypeDef(t),n=this._decodeProperty(r,e);this.trigger("change:"+t,this,n,i||{})},_checkDisposed:function(){},trigger:function(){}}}(),function(){function t(){return"o"+e++}tabris.Proxy=function(e){if(this.cid=e||t(),e in tabris._proxies)throw new Error("cid already in use: "+e);tabris._proxies[this.cid]=this},r.extend(tabris.Proxy.prototype,tabris.Properties,tabris.Events,{_create:function(t){var e=this.constructor._type||this.type;if(tabris._nativeBridge.create(this.cid,e),this.constructor._initProperties)for(var i in this.constructor._initProperties)this._nativeSet(i,this.constructor._initProperties[i]);return this._setProperties(t||{}),this},dispose:function(){this._dispose()},_dispose:function(t){this._isDisposed||this._inDispose||(this._inDispose=!0,this.trigger("dispose",this,{}),this._release(),t||tabris._nativeBridge.destroy(this.cid),delete tabris._proxies[this.cid],this._isDisposed=!0)},_release:function(){},isDisposed:function(){return!!this._isDisposed},_listen:function(t,e){var i=this._getEventConfig(t);i&&!this._isListeningToAlias(t,i)&&(i.listen?i.listen.call(this,e,i.alias===t):this._nativeListen(i.name,e))},_isListeningToAlias:function(t,e){if(!e.alias)return!1;var i=t===e.originalName?e.alias:e.originalName;return this._isListening(i)},_nativeListen:function(t,e){tabris._nativeBridge.listen(this.cid,t,e)},_trigger:function(t,e){var i=this.constructor._trigger[t],r=i&&this.constructor._events[i].trigger;return r instanceof Function?r.call(this,e,i):void(i?this.trigger(i,e):this.trigger(t,e))},_checkDisposed:function(){if(this._isDisposed)throw new Error("Object is disposed")},_getEventConfig:function(t){return this.constructor._events[t]},_nativeSet:function(t,e){tabris._nativeBridge.set(this.cid,t,e)},_nativeGet:function(t){return tabris._nativeBridge.get(this.cid,t)},_nativeCall:function(t,e){return this._checkDisposed(),tabris._nativeBridge.call(this.cid,t,e)},toString:function(){return this.type}});var e=1}(),function(){function t(t,r,n){if(!t||0===t.length)return[];if("*"===r&&!n)return t.concat();var s=i(r);return n?e([],t,s):t.filter(s)}function e(t,i,r){for(var n=0;n<i.length;n++)r(i[n])&&t.push(i[n]),i[n]._children&&e(t,i[n]._getSelectableChildren(),r);return t}function i(t){var e={},i=t instanceof Function?t:r(t);return function(t){return e[t.cid]?!1:i(t)?(e[t.cid]=!0,!0):!1}}function r(t){if("#"===t.charAt(0)){var e=t.slice(1);return function(t){return e===t.id}}if("."===t.charAt(0)){var i=t.slice(1);return function(t){return-1!==t.classList.indexOf(i)}}return"*"===t?function(){return!0}:function(e){return t===e.type}}tabris.ProxyCollection=function(e,i,r){this._array=t(e,i||"*",r);for(var n=0;n<this._array.length;n++)this[n]=this._array[n];this.length=this._array.length};var n=tabris.ProxyCollection.prototype={first:function(){return this._array[0]},last:function(){return this._array[this._array.length-1]},toArray:function(){return this._array.concat()},forEach:function(t){var e=this;this._array.forEach(function(i,r){t(i,r,e)})},indexOf:function(t){return this._array.indexOf(t)},filter:function(t){return new tabris.ProxyCollection(this._array,t)},get:function(t){return this._array[0]?this._array[0].get(t):void 0},parent:function(){for(var t=[],e=0;e<this._array.length;e++){var i=this._array[e].parent();i&&-1===t.indexOf(i)&&t.push(i)}return t.length?new tabris.ProxyCollection(t):void 0},children:function(t){for(var e=[],i=0;i<this._array.length;i++)e.push.apply(e,this._array[i]._getSelectableChildren()||[]);return new tabris.ProxyCollection(e,t)},find:function(t){return new tabris.ProxyCollection(this.children()._array,t,!0)},appendTo:function(t){t.append(this)},dispose:function(){for(var t=0;t<this._array.length;t++)this._array[t].dispose()}};["set","animate","on","off","once"].forEach(function(t){n[t]=function(){for(var e=0;e<this._array.length;e++)this._array[e][t].apply(this._array[e],arguments);return"animate"!==t?this:void 0}})}(),function(){function t(t){return"number"==typeof t&&!isNaN(t)&&t>=0&&t!==1/0}function e(t,e){var i=['Accepting "'];throw i.push(t.join('", "')),i.push('", given was: "',e+'"'),new Error(i.join(""))}function i(t){if("number"!=typeof t)throw new Error(typeof t+" is not a number: "+t);if(isNaN(t)||t===1/0||t===-(1/0))throw new Error("Number is not a valid value: "+t)}tabris.PropertyTypes={any:{},"boolean":{encode:function(t){return!!t}},string:{encode:function(t){return""+t}},number:{encode:function(t){return i(t),t}},natural:{encode:function(t){return i(t),0>t?0:Math.round(t)}},integer:{encode:function(t){return i(t),Math.round(t)}},"function":{encode:function(t){if("function"!=typeof t)throw new Error(typeof t+" is not a function: "+t);return t}},choice:{encode:function(t,i){return Array.isArray(i)?(-1===i.indexOf(t)&&e(i,t),t):(t in i||e(Object.keys(i),t),i[t])}},color:{encode:function(t){return"initial"===t?void 0:r.colorStringToArray(t)},decode:function(t){return t?r.colorArrayToString(t):"rgba(0, 0, 0, 0)"}},font:{encode:function(t){return"initial"===t?void 0:r.fontStringToArray(t)},decode:function(t){return t?r.fontArrayToString(t):"initial"}},image:{encode:function(e){if(!e)return null;if("string"==typeof e&&(e={src:e}),"object"!=typeof e)throw new Error("Not an image: "+e);if("string"!=typeof e.src)throw new Error("image.src is not a string");if(""===e.src)throw new Error("image.src is an empty string");return["scale","width","height"].forEach(function(i){if(i in e&&!t(e[i]))throw new Error("image."+i+" is not a dimension: "+e[i])}),"scale"in e&&("width"in e||"height"in e)&&console.warn("Image scale is ignored if width or height are given"),r.imageToArray(e)},decode:function(t){return t?r.imageFromArray(t):null}},layoutData:{encode:function(t){return tabris.Layout.encodeLayoutData(t)},decode:function(t){return tabris.Layout.decodeLayoutData(t)}},edge:{encode:function(t){return null==t?null:tabris.Layout.encodeEdge(t)},decode:function(t){return tabris.Layout.decodeAttribute(t)}},dimension:{encode:function(t){return null==t?null:tabris.Layout.encodeSize(t)},decode:function(t){return tabris.Layout.decodeAttribute(t)}},sibling:{encode:function(t){return null==t?null:tabris.Layout.encodeRef(t)},decode:function(t){return tabris.Layout.decodeAttribute(t)}},bounds:{encode:function(t){return[t.left,t.top,t.width,t.height]},decode:function(t){return{left:t[0],top:t[1],width:t[2],height:t[3]}}},proxy:{encode:function(t){return t instanceof tabris.Proxy?t.cid:t instanceof tabris.ProxyCollection?t[0]?t[0].cid:null:t},decode:tabris},nullable:{encode:function(t,e){return null===t?t:tabris.PropertyTypes[e].encode(t)}},opacity:{encode:function(t){if(i(t),0>t||t>1)throw new Error("Number is out of bounds: "+t);return t}},transform:{encode:function(t){for(var e in t){if(!(e in n))throw new Error('Not a valid transformation containing "'+e+'"');i(t[e])}return r.extend({},n,t)}},array:{encode:function(t,e){if(null==t)return[];if(!(t instanceof Array))throw new Error(typeof t+" is not an array: "+t);return e?t.map(tabris.PropertyTypes[e].encode):t}}};var n={rotation:0,scaleX:1,scaleY:1,translationX:0,translationY:0,translationZ:0}}(),function(){tabris.registerType("_Animation",{_type:"tabris.Animation",_create:function(){return this._super("_create",arguments),this._nativeListen("Start",!0),this._nativeListen("Completion",!0),this},_events:{Start:{trigger:function(){this._target.trigger("animationstart",this._target,this._options)}},Completion:{trigger:function(){this._target._off("dispose",this.dispose,this),this._target.trigger("animationend",this._target,this._options),this.dispose()}}},_properties:{properties:"any",delay:"natural",duration:"natural",repeat:"natural",reverse:"boolean",easing:["choice",["linear","ease-in","ease-out","ease-in-out"]],target:"proxy"},start:function(){this._nativeCall("start")}}),tabris._Animation.animate=function(e,i){var n={};for(var s in e)if(t[s])try{n[s]=this._encodeProperty(this._getTypeDef(s),e[s]),this._storeProperty(s,n[s],i)}catch(o){console.warn(this.type+': Ignored invalid animation property value for "'+s+'"')}else console.warn(this.type+': Ignored invalid animation property "'+s+'"');for(var a in i)tabris._Animation._properties[a]||"name"===a||console.warn(this.type+': Ignored invalid animation option "'+a+'"');var c=tabris.create("_Animation",r.extend({},i,{target:this,properties:n}));c._target=this,c._options=i,this._on("dispose",c.dispose,c),c.start()};var t={opacity:!0,transform:!0}}(),tabris.registerType("_GestureRecognizer",{_type:"tabris.GestureRecognizer",_properties:{type:"string",target:"proxy",fingers:"natural",touches:"natural",duration:"natural",direction:"string"},_events:{gesture:!0}}),function(){function t(){var t={};return["model","platform","version"].forEach(function(e){i(t,e,r(e))}),t}function e(){var t={};return i(t,"width",r("screenWidth")),i(t,"height",r("screenHeight")),t}function i(t,e,i){Object.defineProperty(t,e,{get:i,set:function(){}})}function r(t){return function(){return tabris.device.get(t)}}tabris.registerType("_Device",{_cid:"tabris.Device",_properties:{model:"any",platform:"any",version:"any",language:"any",orientation:"any",screenWidth:"any",screenHeight:"any",scaleFactor:"any"},_setProperty:function(){},_events:{"change:orientation":{name:"orientationchange",trigger:function(t){this._triggerChangeEvent("orientation",t.orientation)}}},dispose:function(){throw new Error("cannot dispose device object")}}),tabris._publishDeviceProperties=function(n){"device"in n||(n.device=t()),"screen"in n||(n.screen=e()),"navigator"in n&&!("language"in n.navigator)&&i(n.navigator,"language",r("language")),"devicePixelRatio"in n||(n.devicePixelRatio=tabris.device.get("scaleFactor"))},tabris.load(function(){tabris.device=new tabris._Device,"undefined"!=typeof window&&tabris._publishDeviceProperties(window)})}(),function(){function t(){if(this._layoutData){var t=tabris.Layout.checkConsistency(this._layoutData);this._nativeSet("layoutData",tabris.Layout.resolveReferences(t,this))}}function e(t){return{listen:function(e){var n=this.get("gestures");if(e){var s=r.extend({target:this},n[t]),o=tabris.create("_GestureRecognizer",s).on("gesture",i,{target:this,name:t});this._recognizers||(this._recognizers={}),this._recognizers[t]=o,this._on("dispose",o.dispose,o)}else this._recognizers&&t in this._recognizers&&(this._recognizers[t].dispose(),delete this._recognizers[t])}}}function i(t){this.target.trigger(this.name,this.target,t)}function n(t,e){this.trigger(e,this,t||{})}tabris.Widget=function(){throw new Error("Cannot instantiate abstract Widget")};var s=tabris.Proxy.prototype;tabris.Widget.prototype=r.extendPrototype(tabris.Proxy,{append:function(){this._checkDisposed();var t=function(t){if(!(t instanceof tabris.Proxy))throw new Error("Cannot append non-widget");t._setParent(this)}.bind(this);return arguments[0]instanceof tabris.ProxyCollection?arguments[0].toArray().forEach(t):Array.isArray(arguments[0])?arguments[0].forEach(t):Array.prototype.forEach.call(arguments,t),this},appendTo:function(t){if(this._checkDisposed(),t=t instanceof tabris.ProxyCollection?t.first():t,!(t instanceof tabris.Proxy))throw new Error("Cannot append to non-widget");return this._setParent(t),this},insertBefore:function(t){if(this._checkDisposed(),t=t instanceof tabris.ProxyCollection?t.first():t,!(t instanceof tabris.Proxy))throw new Error("Cannot insert before non-widget");var e=t.parent(),i=e._children.indexOf(t);return this._setParent(e,i),this},insertAfter:function(t){if(this._checkDisposed(),t=t instanceof tabris.ProxyCollection?t.first():t,!(t instanceof tabris.Proxy))throw new Error("Cannot insert after non-widget");var e=t.parent(),i=e._children.indexOf(t);return this._setParent(e,i+1),this},parent:function(){return this._parent},children:function(t){return new tabris.ProxyCollection(this._getSelectableChildren(),t)},siblings:function(t){var e=this._parent?this._parent._getSelectableChildren():[],i=e.filter(function(t){return t!==this}.bind(this));return new tabris.ProxyCollection(i,t)},find:function(t){return new tabris.ProxyCollection(this._getSelectableChildren(),t,!0)},apply:function(t){var e=new tabris.ProxyCollection(this._children.concat(this),"*",!0);t["*"]&&e.set(t["*"]);var i;for(i in t)"*"!==i&&"#"!==i[0]&&"."!==i[0]&&e.filter(i).set(t[i]);for(i in t)"."===i[0]&&e.filter(i).set(t[i]);for(i in t)"#"===i[0]&&e.filter(i).set(t[i]);return this},_getContainer:function(){return this},_getSelectableChildren:function(){return this._children},_setParent:function(t,e){this._nativeSet("parent",tabris.PropertyTypes.proxy.encode(t._getContainer(this))),this._parent&&(this._parent._removeChild(this),tabris.Layout.addToQueue(this._parent)),this._parent=t,this._parent._addChild(this,e),tabris.Layout.addToQueue(this._parent)},_addChild:function(t,e){var i=this.constructor._supportsChildren;if(i===!1)throw new Error(this.type+" cannot contain children");if("function"==typeof i&&!i(t))throw new Error(this.type+" cannot contain children of type "+t.type);this._children||(this._children=[]),"number"==typeof e?this._children.splice(e,0,t):this._children.push(t),this.trigger("addchild",this,t,{})},_removeChild:function(t){if(this._children){var e=this._children.indexOf(t);-1!==e&&this._children.splice(e,1),this.trigger("removechild",this,t,{index:e})}},_release:function(){if(this._children){for(var t=this._children.concat(),e=0;e<t.length;e++)t[e]._dispose(!0);delete this._children}this._parent&&(this._parent._removeChild(this),tabris.Layout.addToQueue(this._parent),delete this._parent)},_getEventConfig:function(t){var i=s._getEventConfig.apply(this,arguments);return!i&&this.get("gestures")[t]?e(t):i},_flushLayout:function(){this._children&&this._children.forEach(function(e){t.call(e)})},classList:{get length(){return 0},indexOf:function(){return-1},join:function(){return""}},animate:tabris._Animation.animate}),tabris.registerWidget=function(t,e){if(e=r.extend({},e),e._events=r.extend({},tabris.registerWidget._defaultEvents,e._events||{}),e._properties!==!0){var i=tabris.registerWidget._defaultProperties;e._properties=r.extend({},i,e._properties||{})}tabris.registerType(t,e,tabris.Widget)};var o;tabris.load(function(){o="Android"===device.platform&&device.version<=17});var a={set:function(t,e){this._layoutData||(this._layoutData={}),null==e?delete this._layoutData[t]:this._layoutData[t]=e,this._parent&&tabris.Layout.addToQueue(this._parent)},get:function(t){return this._layoutData&&null!=this._layoutData[t]?this._layoutData[t]:null}};r.extend(tabris.registerWidget,{_defaultEvents:{touchstart:{trigger:n},touchmove:{trigger:n},touchend:{trigger:n},touchcancel:{trigger:n},resize:{name:"Resize",alias:"change:bounds",trigger:function(t){if(o){var e=this;setTimeout(function(){e._triggerChangeEvent("bounds",t.bounds,{},"resize"),e.trigger("resize",e,tabris.PropertyTypes.bounds.decode(t.bounds),{})},0)}else this._triggerChangeEvent("bounds",t.bounds,{},"resize"),this.trigger("resize",this,tabris.PropertyTypes.bounds.decode(t.bounds),{})}}},_defaultProperties:tabris.registerType.normalizePropertiesMap({enabled:{type:"boolean","default":!0},visible:{type:"boolean","default":!0,access:{set:function(t,e,i){this._nativeSet("visibility",e),this._storeProperty(t,e,i)}}},layoutData:{type:"layoutData",access:{set:function(t,e){this._layoutData=e,this._parent&&tabris.Layout.addToQueue(this._parent)},get:function(){return this._layoutData||null}}},left:{type:"edge",access:a},right:{type:"edge",access:a},top:{type:"edge",access:a},bottom:{type:"edge",access:a},width:{type:"dimension",access:a},height:{type:"dimension",access:a},centerX:{type:"dimension",access:a},centerY:{type:"dimension",access:a},baseline:{type:"sibling",access:a},elevation:{type:"number","default":0},font:{type:"font",access:{set:function(t,e,i){this._nativeSet(t,void 0===e?null:e),this._storeProperty(t,e,i)}}},backgroundImage:"image",bounds:{type:"bounds",access:{set:function(){console.warn(this.type+': Can not set read-only property "bounds".')}}},background:{type:"color",access:{set:function(t,e,i){this._nativeSet(t,void 0===e?null:e),this._storeProperty(t,e,i)}}},textColor:{type:"color",access:{set:function(t,e,i){this._nativeSet("foreground",void 0===e?null:e),this._storeProperty(t,e,i)},get:function(t){var e=this._getStoredProperty(t);return void 0===e&&(e=this._nativeGet("foreground")),e}}},opacity:{type:"opacity","default":1},transform:{type:"transform","default":function(){return{rotation:0,scaleX:1,scaleY:1,translationX:0,translationY:0,translationZ:0}}},highlightOnTouch:{type:"boolean","default":!1},cornerRadius:{type:"number","default":0},id:{type:"string",access:{set:function(t,e){this.id=e},get:function(){return this.id}}},"class":{type:"string",access:{set:function(t,e){this.classList=e.trim().split(/\s+/)},get:function(){return this.classList.join(" ")}}},gestures:{access:{set:function(t,e){this._gestures=r.extend({},c,e)},get:function(){return this._gestures||(this._gestures=r.extend({},c)),this._gestures}}}})});var c={tap:{type:"tap"},longpress:{type:"longpress"},pan:{type:"pan"},"pan:left":{type:"pan",direction:"left"},"pan:right":{type:"pan",direction:"right"},"pan:up":{type:"pan",direction:"up"},"pan:down":{type:"pan",direction:"down"},"pan:horizontal":{type:"pan",direction:"horizontal"},"pan:vertical":{type:"pan",direction:"vertical"},"swipe:left":{type:"swipe",direction:"left"},"swipe:right":{
type:"swipe",direction:"right"},"swipe:up":{type:"swipe",direction:"up"},"swipe:down":{type:"swipe",direction:"down"}}}(),function(){var t=function(){};tabris.DOMEvent=function(t,e){this.type=t,this.timeStamp=Date.now(),"undefined"!=typeof e&&("bubbles"in e&&(this.bubbles=e.bubbles),"cancelable"in e&&(this.cancelable=e.cancelable))},tabris.DOMEvent.prototype={NONE:0,CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,target:null,currentTarget:null,eventPhase:0,type:"",bubbles:!1,cancelable:!1,defaultPrevented:!1,isTrusted:!1,stopPropagation:t,stopImmediatePropagation:t,preventDefault:t,initEvent:function(t,e,i){this.type=t,this.bubbles=e,this.cancelable=i}},tabris._addDOMEventTargetMethods=function(t){if("function"!=typeof t.addEventListener){var e;t.addEventListener=function(t,i){e||(e=[]),t in e||(e[t]=[]);var r=e[t].indexOf(i);return-1===r&&e[t].push(i),1===e[t].length},t.removeEventListener=function(t,i){if(e&&t in e){var r=e[t].indexOf(i);if(-1!==r)return e[t].splice(r,1),0===e[t].length}return!1},t.dispatchEvent=function(i){if(e&&i.type in e){var r=e[i.type];i.target=t;for(var n=0;n<r.length;n++)r[n].call(this,i)}}}},"undefined"!=typeof window&&(tabris._addDOMEventTargetMethods(window),window.Event||(window.Event=tabris.DOMEvent))}(),function(){function t(t,e){if("HEAD"===t.tagName&&"SCRIPT"===e.tagName&&e.src){var i;try{i=tabris._client.loadAndExecute(e.src,"","")}catch(r){return console.error("Error loading "+e.src+":",r),console.log(r.stack),void("function"==typeof e.onerror&&e.onerror.call(window,r))}i.loadError?"function"==typeof e.onerror&&e.onerror.call(window,new Error("Could not load "+e.src)):"function"==typeof e.onload&&e.onload.call(window)}}var e=function(){},i=function(t){this.tagName=(t||"").toUpperCase(),this.children=[]};i.prototype={setAttribute:e,appendChild:function(e){return this.children.push(e),t(this,e),e},cloneNode:function(){return new i},lastChild:function(){return new i}},tabris._addDOMDocument=function(t){t.document={documentElement:{},createDocumentFragment:function(){return new i},createElement:function(t){return new i(t)},location:{href:""},readyState:"loading",head:new i("head"),getElementsByTagName:function(t){return this.head.children.filter(function(e){return e.tagName===t.toUpperCase()})},createEvent:function(){return new tabris.DOMEvent}},tabris._addDOMEventTargetMethods(t.document),"undefined"==typeof t.location&&(t.location=t.document.location),tabris.load(function(){t.document.readyState="complete";var e=document.createEvent("Events");e.initEvent("DOMContentLoaded",!1,!1),t.document.dispatchEvent(e)}),t.navigator={userAgent:"tabris-js"}},"undefined"==typeof window||window.document||tabris._addDOMDocument(window)}(),function(){function t(t){return"number"==typeof t&&isFinite(t)?Math.max(0,Math.round(t)):0}tabris.registerType("_Timer",{_type:"tabris.Timer",_events:{Run:!0},_properties:{delay:"any",repeat:"any"}}),tabris._addWindowTimerMethods=function(e){function i(t,e,i,s){var o=r++;return tabris.load(function(){var r=tabris.create("_Timer",{delay:e,repeat:i}).on("Run",function(){"undefined"!=typeof t&&"undefined"!=typeof t.apply&&t.apply(window,s),i||(r.dispose(),delete n[o])});r._nativeCall("start"),n[o]=r}),o}if("function"!=typeof e.setTimeout){var r=0,n={};e.setTimeout=function(e,r){var n=Array.prototype.slice.call(arguments,2);return i(e,t(r),!1,n)},e.setInterval=function(e,r){var n=Array.prototype.slice.call(arguments,2);return i(e,t(r),!0,n)},e.clearTimeout=e.clearInterval=function(t){var e=n[t];e&&(e._nativeCall("cancel",{}),e.dispose(),delete n[t])}}},"undefined"!=typeof window&&tabris._addWindowTimerMethods(window)}(),tabris.registerType("_App",{_cid:"tabris.App",_events:{pause:{name:"Pause",trigger:t},resume:{name:"Resume",trigger:t},open:{name:"Open",trigger:t},patchInstall:{trigger:e},backnavigation:{trigger:function(){var t=!1,e={};return e.preventDefault=function(){t=!0},this.trigger("backnavigation",this,e),t||e.preventDefault===!0}}},getResourceLocation:function(t){this._resourceBaseUrl||(this._resourceBaseUrl=this._nativeGet("resourceBaseUrl"));var e=null!=t?"/"+i(""+t):"";return this._resourceBaseUrl+e},dispose:function(){throw new Error("tabris.app can not be disposed")},reload:function(){this._nativeCall("reload",{})},installPatch:function(t,e){if("string"!=typeof t)throw new Error("parameter url is not a string");this._pendingPatchCallback?"function"==typeof e&&e(new Error("Another installPatch operation is already pending.")):(this._pendingPatchCallback=e||!0,this._listen("patchInstall",!0),this._nativeCall("installPatch",{url:t}))}}),tabris.load(function(){tabris.app=new tabris._App}),tabris.registerType("_Display",{_type:"rwt.widgets.Display"}),tabris.registerWidget("_Shell",{_type:"rwt.widgets.Shell",_events:{Close:!0},_properties:{style:"any",mode:"any",active:"any"}}),tabris.registerWidget("_UI",{_type:"tabris.UI",_events:{ShowPreviousPage:!0},_supportsChildren:!0,_create:function(){return tabris.create("_Display"),this._shell=tabris.create("_Shell",{style:["NO_TRIM"],mode:"maximized",active:!0,visible:!0}).on("Close",function(){this.dispose()}),this._super("_create",arguments),this._nativeSet("shell",this._shell.cid),this._pages=[],this._drawer=null,this._on("ShowPreviousPage",function(){var t=this.get("activePage");t&&t.close()}),this._on("change:activePage",this._onChangeActivePage,this),this._removedPages=[],Object.defineProperty(this,"drawer",{get:function(){return this._drawer}.bind(this),set:function(){}}),this},_properties:{image:"image",toolbarVisible:{type:"boolean","default":!0},displayMode:{type:["choice",["normal","fullscreen"]],"default":"normal"},statusBarTheme:{type:["choice",["light","dark","default"]],"default":"default"},activePage:{access:{set:function(t,e,i){if(!(e instanceof tabris.Page))throw new Error("Value for activePage is not a page");this._nativeSet("activePage",e._page.cid),this._storeProperty(t,e,i)}}}},_getContainer:function(t){switch(t.type){case"Drawer":return t._drawer?t._drawer:this;case"Action":case"SearchAction":return this;default:return this._shell}},_setCurrentDrawer:function(t){if(this._drawer&&t)throw new Error("Can not create multiple instances of Drawer");this._drawer=t},_pageOpened:function(t){this.set("activePage",t)},_pageClosed:function(t){if(this._isOnStack(t)){t._isTopLevel&&t!==this._getCurrentTopLevelPage()?t._isTopLevel&&this._removeFromStack(t):(this._removePagesOnTop(t),this._pages.pop());var e=this._getCurrentPage();if(!e)throw new Error("Cannot close the last page");this.set("activePage",e)}},_onChangeActivePage:function(t,e){if(e!==this._getCurrentPage()){if(!this._getCurrentPage()&&!e._isTopLevel)throw new Error("Opened page without a top-level page");var i=this._isOnStack(e);(i||e._isTopLevel)&&(this._removePagesOnTop(e),i&&e._isTopLevel&&this._removeFromStack(e)),e!==this._getCurrentPage()&&this._pages.push(e)}this._updateActivePage(e)},_removePagesOnTop:function(t){for(var e=this._getCurrentPage();e&&e!==t&&!e._isTopLevel;)this._removedPages.push(this._pages.pop()),e=this._getCurrentPage()},_getCurrentTopLevelPage:function(){for(var t=this._pages.length-1;t>0;){var e=this._pages[t--];if(e._isTopLevel)return e}},_getCurrentPage:function(){return this._pages[this._pages.length-1]},_removeFromStack:function(t){var e=this._pages.indexOf(t);-1!==e&&this._pages.splice(e,1)},_isOnStack:function(t){return-1!==this._pages.indexOf(t)},_updateActivePage:function(t){var e=this._oldActivePage;t!==e&&(e&&e.trigger("disappear",e),t&&t.trigger("appear",t)),this._closeRemovedPages(),this._oldActivePage=t},_closeRemovedPages:function(){this._removedPages.forEach(function(t){t.close()}),this._removedPages=[]}}),tabris.load(function(){tabris.ui=tabris.create("_UI")}),function(){function t(t){return t}function e(t){if(t in this.values)return t;throw new Error(t)}function i(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function n(){var t={};for(var e in a)t[e]=a[e].init;return t}function s(t,e,i){tabris.CanvasContext.prototype[t]=function(){if(e&&arguments.length<e)throw new Error("Not enough arguments to CanvasContext."+t);this._pushOperation(t),i&&i.apply(this,arguments)}}function o(t,e){var i=a[e];Object.defineProperty(t,e,{get:function(){return i.decode(t._state[e])},set:function(r){try{t._state[e]=i.encode(r),t._pushOperation(e),i.addOperations(t,t._state[e])}catch(n){console.warn("Unsupported value for "+e+": "+r)}}})}tabris.registerType("_GC",{_type:"rwt.widgets.GC",_properties:{parent:"proxy"}}),tabris.CanvasContext=function(t){this._gc=t,this._state=n(),this._savedStates=[],this._opCodes=[],this._newOpCodes=[],this._operations=[],this._doubles=[],this._booleans=[],this._strings=[],this._ints=[],this.canvas={width:0,height:0,style:{}};for(var e in a)o(this,e);tabris._on("flush",this._flush,this),t._on("dispose",function(){tabris._off("flush",this._flush,this)},this)},tabris.CanvasContext.prototype={fillRect:function(t,e,i,r){if(arguments.length<4)throw new Error("Not enough arguments to CanvasContext.fillRect");this._pushOperation("beginPath"),this._pushOperation("rect"),this._doubles.push(t,e,i,r),this.fill()},strokeRect:function(t,e,i,r){if(arguments.length<4)throw new Error("Not enough arguments to CanvasContext.strokeRect");this._pushOperation("beginPath"),this._pushOperation("rect"),this._doubles.push(t,e,i,r),this.stroke()},measureText:function(t){return{width:5*t.length+5}},_init:function(t,e){this.canvas.width=t,this.canvas.height=e,this._gc._nativeCall("init",{width:t,height:e,font:[["sans-serif"],12,!1,!1],fillStyle:[0,0,0,255],strokeStyle:[0,0,0,255]})},_flush:function(){this._operations.length>0&&(this._gc._nativeCall("draw",{packedOperations:[this._newOpCodes,this._operations,this._doubles,this._booleans,this._strings,this._ints]}),this._newOpCodes=[],this._operations=[],this._doubles=[],this._booleans=[],this._strings=[],this._ints=[])},_pushOperation:function(t){this._opCodes.indexOf(t)<0&&(this._newOpCodes.push(t),this._opCodes.push(t)),this._operations.push(this._opCodes.indexOf(t))}},s("save",0,function(){this._savedStates.push(r.clone(this._state))}),s("restore",0,function(){this._state=this._savedStates.pop()||this._state}),s("beginPath"),s("closePath"),s("lineTo",2,function(t,e){this._doubles.push(t,e)}),s("moveTo",2,function(t,e){this._doubles.push(t,e)}),s("bezierCurveTo",6,function(t,e,i,r,n,s){this._doubles.push(t,e,i,r,n,s)}),s("quadraticCurveTo",4,function(t,e,i,r){this._doubles.push(t,e,i,r)}),s("rect",4,function(t,e,i,r){this._doubles.push(t,e,i,r)}),s("arc",5,function(t,e,i,r,n,s){this._doubles.push(t,e,i,r,n),this._booleans.push(!!s)}),s("scale",2,function(t,e){this._doubles.push(t,e)}),s("rotate",1,function(t){this._doubles.push(t)}),s("translate",2,function(t,e){this._doubles.push(t,e)}),s("transform",6,function(t,e,i,r,n,s){this._doubles.push(t,e,i,r,n,s)}),s("setTransform",6,function(t,e,i,r,n,s){this._doubles.push(t,e,i,r,n,s)}),s("clearRect",4,function(t,e,i,r){this._doubles.push(t,e,i,r)}),s("fillText",3,function(t,e,i){this._strings.push(t),this._booleans.push(!1,!1,!1),this._doubles.push(e,i)}),s("strokeText",3,function(t,e,i){this._strings.push(t),this._booleans.push(!1,!1,!1),this._doubles.push(e,i)}),s("fill"),s("stroke"),tabris.CanvasContext.getContext=function(t,e,i){return t._gc||(t._gc=tabris.create("_GC",{parent:t})),t._ctx||(t._ctx="Android"===device.platform?new tabris.CanvasContext(t._gc):new tabris.LegacyCanvasContext(t._gc)),t._ctx._init(e,i),t._ctx};var a={lineWidth:{init:1,encode:function(t){if(t>0)return t;throw new Error(t)},decode:t,addOperations:function(t,e){t._doubles.push(e)}},lineCap:{init:"butt",values:i(["butt","round","square"]),encode:e,decode:t,addOperations:function(t,e){t._strings.push(e)}},lineJoin:{init:"miter",values:i(["bevel","miter","round"]),encode:e,decode:t,addOperations:function(t,e){t._strings.push(e)}},fillStyle:{init:[0,0,0,255],encode:r.colorStringToArray,decode:r.colorArrayToString,addOperations:function(t,e){t._ints.push(e[0],e[1],e[2],e[3])}},strokeStyle:{init:[0,0,0,255],encode:r.colorStringToArray,decode:r.colorArrayToString,addOperations:function(t,e){t._ints.push(e[0],e[1],e[2],e[3])}},textAlign:{init:"start",values:i(["start","end","left","right","center"]),encode:e,decode:t,addOperations:function(t,e){t._strings.push(e)}},textBaseline:{init:"alphabetic",values:i(["top","hanging","middle","alphabetic","ideographic","bottom"]),encode:e,decode:t,addOperations:function(t,e){t._strings.push(e)}}}}(),function(){function t(t){return t}function e(t){if(t in this.values)return t;throw new Error(t)}function i(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function n(){var t={};for(var e in o)t[e]=o[e].init;return t}function s(t,e){var i=o[e];Object.defineProperty(t,e,{get:function(){return i.decode(t._state[e])},set:function(r){try{t._state[e]=i.encode(r),t._operations.push([e,this._state[e]])}catch(n){console.warn("Unsupported value for "+e+": "+r)}}})}tabris.LegacyCanvasContext=function(t){this._gc=t,this._state=n(),this._savedStates=[],this._operations=[],this.canvas={width:0,height:0,style:{}};for(var e in o)s(this,e);tabris._on("flush",this._flush,this),t._on("dispose",function(){tabris._off("flush",this._flush,this)},this)},tabris.LegacyCanvasContext.prototype={save:function(){this._operations.push(["save"]),this._savedStates.push(r.clone(this._state))},restore:function(){this._operations.push(["restore"]),this._state=this._savedStates.pop()||this._state},beginPath:function(){this._operations.push(["beginPath"])},closePath:function(){this._operations.push(["closePath"])},lineTo:function(t,e){this._operations.push(["lineTo",t,e])},moveTo:function(t,e){this._operations.push(["moveTo",t,e])},bezierCurveTo:function(t,e,i,r,n,s){this._operations.push(["bezierCurveTo",t,e,i,r,n,s])},quadraticCurveTo:function(t,e,i,r){this._operations.push(["quadraticCurveTo",t,e,i,r])},rect:function(t,e,i,r){this._operations.push(["rect",t,e,i,r])},arc:function(t,e,i,r,n,s){this._operations.push(["arc",t,e,i,r,n,!!s])},scale:function(t,e){this._operations.push(["scale",t,e])},rotate:function(t){this._operations.push(["rotate",t])},translate:function(t,e){this._operations.push(["translate",t,e])},transform:function(t,e,i,r,n,s){this._operations.push(["transform",t,e,i,r,n,s])},setTransform:function(t,e,i,r,n,s){this._operations.push(["setTransform",t,e,i,r,n,s])},clearRect:function(t,e,i,r){this._operations.push(["clearRect",t,e,i,r])},fillRect:function(t,e,i,r){this._operations.push(["beginPath"],["rect",t,e,i,r]),this.fill()},strokeRect:function(t,e,i,r){this._operations.push(["beginPath"],["rect",t,e,i,r]),this.stroke()},fillText:function(t,e,i){this._operations.push(["fillText",t,!1,!1,!1,e,i])},strokeText:function(t,e,i){this._operations.push(["strokeText",t,!1,!1,!1,e,i])},fill:function(){this._operations.push(["fill"])},stroke:function(){this._operations.push(["stroke"])},measureText:function(t){return{width:5*t.length+5}},_init:function(t,e){this.canvas.width=t,this.canvas.height=e,this._gc._nativeCall("init",{width:t,height:e,font:[["sans-serif"],12,!1,!1],fillStyle:[0,0,0,255],strokeStyle:[0,0,0,255]})},_flush:function(){this._operations.length>0&&(this._gc._nativeCall("draw",{operations:this._operations}),this._operations=[])}};var o={lineWidth:{init:1,encode:function(t){if(t>0)return t;throw new Error(t)},decode:t},lineCap:{init:"butt",values:i(["butt","round","square"]),encode:e,decode:t},lineJoin:{init:"miter",values:i(["bevel","miter","round"]),encode:e,decode:t},fillStyle:{init:[0,0,0,255],encode:r.colorStringToArray,decode:r.colorArrayToString},strokeStyle:{init:[0,0,0,255],encode:r.colorStringToArray,decode:r.colorArrayToString},textAlign:{init:"start",values:i(["start","end","left","right","center"]),encode:e,decode:t},textBaseline:{init:"alphabetic",values:i(["top","hanging","middle","alphabetic","ideographic","bottom"]),encode:e,decode:t}}}(),function(){tabris.registerType("_ClientStore",{_cid:"tabris.ClientStore"});var t,e=tabris.PropertyTypes.string.encode;tabris.WebStorage=function(){t=new tabris._ClientStore},tabris.WebStorage.prototype={setItem:function(i,r){if(arguments.length<2)throw new TypeError("Not enough arguments to 'setItem'");t._nativeCall("add",{key:e(i),value:e(r)})},getItem:function(i){if(arguments.length<1)throw new TypeError("Not enough arguments to 'getItem'");var r=t._nativeCall("get",{key:e(i)});return void 0===r?null:r},removeItem:function(i){if(arguments.length<1)throw new TypeError("Not enough arguments to 'removeItem'");t._nativeCall("remove",{keys:[e(i)]})},clear:function(){t._nativeCall("clear")}},tabris.StorageEvent=function(t){this.type=t},tabris.StorageEvent.prototype=r.extendPrototype(tabris.DOMEvent,{bubbles:!1,cancelable:!1,key:"",oldValue:null,newValue:null,url:"",storageArea:null}),window.Storage||(window.Storage=tabris.WebStorage,window.localStorage=new tabris.WebStorage)}(),function(){function t(t){var e={};return e.proxy=null,e.authorRequestHeaders={},e.uploadListeners={},e.uploadEventTarget={},e.timeout=0,e.status=0,e.statusText="",e.responseHeaders="",e.readyState=t.UNSENT,e.responseText="",e.withCredentials=!1,e.responseType="",e.sendInvoked=!1,e.isSynchronous=!1,e.error=!1,e.uploadComplete=!1,e}function e(t){W.forEach(function(e){t["on"+e]=null}),H.forEach(function(e){t.uploadListeners["on"+e]=null})}function i(t,e){Object.defineProperty(t,"upload",{get:function(){return e.uploadEventTarget},set:function(){}})}function n(t,e){Object.defineProperty(t,"readyState",{get:function(){return e.readyState},set:function(){}})}function s(t,e){Object.defineProperty(t,"timeout",{get:function(){return e.timeout},set:function(t){isNaN(t)||(e.timeout=Math.round(t))}})}function o(t,e){Object.defineProperty(t,"responseText",{get:function(){if(null===e.responseText)return"";if("string"!=typeof e.responseText)throw new Error("IllegalStateError: responseText is not a string");return e.readyState!==t.LOADING&&e.readyState!==t.DONE?"":e.error?"":e.responseText},set:function(){}})}function a(t,e){Object.defineProperty(t,"response",{get:function(){return e.readyState!==t.LOADING&&e.readyState!==t.DONE?"":e.error?"":e.responseText},set:function(){}})}function c(t,e){Object.defineProperty(t,"responseType",{get:function(){return e.responseType},set:function(i){if(e.readyState===t.LOADING||e.readyState===t.DONE)throw new Error("InvalidStateError: state must not be 'LOADING' or 'DONE' when setting responseType");if(!(["arraybuffer","blob","document","json","text"].indexOf(i)<0)){if(["arraybuffer","blob","document","json"].indexOf(i)>-1)throw new Error("Only the 'text' response type is supported.");e.responseType=i}}})}function u(t,e){W.forEach(function(i){l(i,t,e)}),H.forEach(function(t){l(t,e.uploadEventTarget,e.uploadListeners)})}function l(t,e,i){var r="on"+t;Object.defineProperty(e,r,{get:function(){return i[r]},set:function(n){"function"==typeof n&&(e.removeEventListener(t,e[r]),i[r]=n,e.addEventListener(t,e[r]))}})}function h(t,e){Object.defineProperty(t,"status",{get:function(){return[t.OPENED,t.UNSENT].indexOf(e.readyState)>-1?0:e.error?0:e.status},set:function(){}})}function d(t,e){Object.defineProperty(t,"statusText",{get:function(){return[t.OPENED,t.UNSENT].indexOf(e.readyState)>-1?"":e.error?"":e.statusText},set:function(){}})}function p(t,e){Object.defineProperty(t,"withCredentials",{set:function(i){if(e.readyState!==t.UNSENT&&e.readyState!==t.OPENED)throw new Error("InvalidStateError: state must be 'UNSENT' or 'OPENED' when setting withCredentials");if(e.sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to set 'withCredentials'");"boolean"==typeof i&&(e.withCredentials=i)},get:function(){return e.withCredentials}})}function f(t,e){return function(i,r,n,s,o){var a={};E(i,r),a.source=r;var c=r.replace(/.*?:\/\//g,"");if(a.isRelative=!new RegExp("^(?:[a-z]+:)?//","i").test(r),a.userdata=c.substring(0,c.indexOf("@")),"undefined"==typeof n&&(n=!0,s=null,o=null),!n)throw new Error("Only asynchronous request supported.");a.isRelative&&s&&o&&(a.userdata=s+":"+o),e.requestMethod=i,e.requestUrl=a,e.isSynchronous=!n,e.authorRequestHeaders={},e.sendInvoked=!1,e.responseText=null,e.readyState!==t.OPENED&&(e.readyState=t.OPENED,R("readystatechange",t))}}function g(t,e){return function(i){if(e.proxy=tabris.create("_HttpRequest"),e.proxy.on("StateChange",function(i){w(i,t,e)}),e.proxy.on("DownloadProgress",function(e){D("progress",t,e.lengthComputable,e.loaded,e.total)}),e.proxy.on("UploadProgress",function(e){D("progress",t.upload,e.lengthComputable,e.loaded,e.total)}),e.readyState!==t.OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'send'");if(e.sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to execute 'send'");["GET","HEAD"].indexOf(e.requestMethod)>-1&&(i=null),e.requestBody=i,e.error=e.uploadComplete=!1,i||(e.uploadComplete=!0),e.withCredentials&&e.requestUrl.userdata&&t.setRequestHeader("Authorization","Basic "+e.requestUrl.userdata),e.sendInvoked=!0,D("loadstart",t),e.uploadComplete||D("loadstart",t.upload),e.proxy._nativeCall("send",{url:e.requestUrl.source,method:e.requestMethod,timeout:t.timeout,headers:e.authorRequestHeaders,data:e.requestBody})}}function _(t,e){return function(){e.proxy&&e.proxy._nativeCall("abort"),[t.UNSENT,t.OPENED].indexOf(e.readyState)>-1&&!e.sendInvoked||e.readyState===t.DONE||(R("readystatechange",t),e.uploadComplete||(e.uploadComplete=!0,A(t.upload)),A(t)),e.readyState=t.UNSENT}}function y(t,e){return function(i,r){if(e.readyState!==t.OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'setRequestHeader'");if(e.sendInvoked)throw new Error("InvalidStateError: cannot set request header if 'send()' invoked and request not completed");if(!P(i))throw new TypeError("Invalid HTTP header name, failed to execute 'open'");if(!T(r))throw new TypeError("Invalid HTTP header value, failed to execute 'open'");if(S(i))throw new Error("Cannot set forbidden header '"+i+"'");i in e.authorRequestHeaders?e.authorRequestHeaders[i]=e.authorRequestHeaders[i]+", "+r:e.authorRequestHeaders[i]=r}}function b(t,e){return function(i){if([t.UNSENT,t.OPENED].indexOf(t.readyState)>-1)return null;if(e.error)return null;var r=["set-cookie","set-cookie2","status"];if(r.indexOf(i.toLowerCase())>-1)return null;for(var n in e.responseHeaders)if(n.toLowerCase()===i.toLowerCase())return e.responseHeaders[n];return null}}function v(t,e){return function(){return[t.UNSENT,t.OPENED].indexOf(t.readyState)>-1?"":e.error?"":m(e.responseHeaders)}}function m(t){var e=[],i=["set-cookie","set-cookie2","status"];for(var r in t)i.indexOf(r.toLowerCase())<0&&e.push(r+": "+t[r]);return e.join("\n")}function w(t,e,i){switch(t.state){case"headers":i.readyState=e.HEADERS_RECEIVED,i.status=t.code,i.statusText=t.message,i.responseHeaders=t.headers,R("readystatechange",e),i.uploadComplete=!0,k(e.upload);break;case"loading":i.readyState=e.LOADING,R("readystatechange",e);break;case"finished":i.responseText=t.response,i.readyState=e.DONE,R("readystatechange",e),k(e),k(e.upload),i.proxy.dispose(),i.proxy=null;break;case"error":x("error",e,i);break;case"timeout":x("timeout",e,i);break;case"abort":x("abort",e,i)}}function x(t,e,i){i.error=!0,i.readyState=e.DONE,R("readystatechange",e),L(t,e),i.uploadComplete||(i.uploadComplete=!0,L(t,e.upload)),i.proxy.dispose(),i.proxy=null}function E(t,e){if(!t)throw new TypeError("Method argument should be specified to execute 'open'");if(!e)throw new TypeError("URL argument should be specified to execute 'open'");C(t),O(e)}function C(t){if(!P(t))throw new TypeError("Invalid HTTP method, failed to execute 'open'");var e=["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"],i=t.toUpperCase();e.indexOf(i)>=0&&(t=i);var r=["CONNECT","TRACE","TRACK"];if(r.indexOf(t)>=0)throw new Error("SecurityError: '"+t+"' HTTP method is not secure, failed to execute 'open'")}function P(t){var e=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"];return!(/[^\x21-\x7E]/.test(t)||e.indexOf(t)>=0)}function T(t){return/^[\x09\x0A\x0D\x20-\x7E\xA0-\xFF]*$/.test(t)&&t.indexOf("\n")<0&&t.indexOf("\r")<0}function S(t){return q.indexOf(t.toLowerCase())>-1}function O(t){var e=I(t);if(e&&-1===B.indexOf(e))throw new SyntaxError("Unsupported URL scheme, failed to execute 'open'")}function I(t){var e=/^(\S+?):/.exec(t);return e?e[1]:null}function D(t,e,i,r,n){e.dispatchEvent(N(t,e,i,r,n))}function A(t){D("progress",t),D("abort",t),D("loadend",t)}function L(t,e){D("progress",e),D(t,e),D("loadend",e)}function k(t){D("load",t),D("loadend",t)}function N(t,e,i,r,n){var s=new tabris.XMLHttpRequestProgressEvent(t);return s.currentTarget=s.target=e,i&&(s.lengthComputable=i),r&&(s.loaded=r),n&&(s.total=n),s}function R(t,e){var i=M(t,e);e.dispatchEvent(i)}function M(t,e){var i=new tabris.DOMEvent(t);return i.currentTarget=i.target=e,i}tabris.registerType("_HttpRequest",{_type:"tabris.HttpRequest",_events:{StateChange:!0,DownloadProgress:!0,UploadProgress:!0}});var W=["loadstart","readystatechange","load","loadend","progress","timeout","abort","error"],H=["progress","loadstart","load","loadend","timeout","abort","error"];tabris.XMLHttpRequest=function(){var r=t(this);i(this,r),n(this,r),s(this,r),a(this,r),o(this,r),c(this,r),h(this,r),d(this,r),p(this,r),u(this,r),e(r),this.open=f(this,r),this.send=g(this,r),this.abort=_(this,r),this.setRequestHeader=y(this,r),this.getResponseHeader=b(this,r),this.getAllResponseHeaders=v(this,r),tabris._addDOMEventTargetMethods(this),tabris._addDOMEventTargetMethods(r.uploadEventTarget)},tabris.XMLHttpRequest.prototype={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},tabris.XMLHttpRequestProgressEvent=function(t){this.type=t},tabris.XMLHttpRequestProgressEvent.prototype=r.extendPrototype(tabris.DOMEvent,{lengthComputable:!1,loaded:0,total:0});var B=["http","https","file"],q=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=tabris.XMLHttpRequest,window.XMLHttpRequestProgressEvent=tabris.XMLHttpRequestProgressEvent)}(),tabris.registerWidget("Action",{_type:"tabris.Action",_properties:{image:{type:"image","default":null},placementPriority:{type:["choice",{low:"LOW",high:"HIGH",normal:"NORMAL"}],access:{get:function(){var t=this._nativeGet("placementPriority");return t?t.toLowerCase():t}},nocache:!0},title:{type:"string","default":""}},_events:{select:{name:"Selection",listen:function(t){this._nativeListen("Selection",t)},trigger:function(t){this.trigger("select",this,t)}}},_create:function(){return this._super("_create",arguments),tabris.ui.append(this),this}}),tabris.registerWidget("ActivityIndicator",{_type:"rwt.widgets.ProgressBar",_initProperties:{style:["INDETERMINATE"],data:{spinningIndicator:!0}}}),tabris.registerWidget("Button",{_type:"rwt.widgets.Button",_initProperties:{style:["PUSH"]},_events:{select:{name:"Selection",listen:function(t){this._nativeListen("Selection",t)},trigger:function(t){this.trigger("select",this,t)}}},_properties:{alignment:{type:["choice",["left","right","center"]],"default":"center"},image:{type:"image","default":null},text:{type:"string","default":""}}}),tabris.registerWidget("Canvas",{_type:"rwt.widgets.Canvas",_supportsChildren:!0,getContext:function(t,e,i){return"2d"===t?tabris.CanvasContext.getContext(this,e,i):null}}),tabris.registerWidget("CheckBox",{_type:"rwt.widgets.Button",_initProperties:{style:["CHECK"]},_events:{select:{name:"Selection",alias:"change:selection",trigger:function(t){this._triggerChangeEvent("selection",t.selection),this.trigger("select",this,t.selection,{})}}},_properties:{text:{type:"string","default":""},selection:{type:"boolean",nocache:!0}}}),function(){function t(t,e){var i=t.get(e);return"function"==typeof i?i.apply(null,Array.prototype.slice.call(arguments,2)):i}function e(t,e){var i=t._cellTypes||(t._cellTypes=[]),r=i.indexOf(e);return-1===r&&(r+=i.push(e)),r}function i(t,e){var i=t._cellTypes||[];return i[e]}function r(t){return function(){var e=this.get(t);e!==this["_prev:"+t]&&this._triggerChangeEvent(t,e),this["_prev:"+t]=e}}tabris.registerWidget("CollectionView",{_type:"tabris.CollectionView",_supportsChildren:function(t){return t instanceof tabris.Cell},_properties:{itemHeight:{type:"any","default":0,access:{set:function(t,e,i){"function"!=typeof e&&this._nativeSet("itemHeight",e),this._storeProperty(t,e,i)}}},items:{type:"array",access:{set:function(t,e,i){this._setItems(e,i)},get:function(){return this._items}}},initializeCell:{type:"function","default":null,access:{set:function(t,e){this._storeProperty(t,e)}}},cellType:{type:"any","default":null,access:{set:function(t,e,i){this._storeProperty(t,e,i)}}},refreshEnabled:{type:"boolean","default":!1},refreshIndicator:{type:"boolean","default":!1},refreshMessage:{type:"string","default":""},firstVisibleIndex:{type:"number",access:{set:function(t){console.warn(this.type+": Cannot set read-only property '"+t+"'.")}}},lastVisibleIndex:{type:"number",access:{set:function(t){console.warn(this.type+": Cannot set read-only property '"+t+"'.")}}}},_create:function(){this._items=[];var t=this._super("_create",arguments);return this._nativeListen("requestinfo",!0),this._nativeListen("createitem",!0),this._nativeListen("populateitem",!0),this._reload(),t},set:function(){var t=this._super("set",arguments);return this._reload(),t},_events:{refresh:{trigger:function(t){this.trigger("refresh",this,t)}},requestinfo:{trigger:function(i){var r=this._getItem(this._items,i.index),n=t(this,"cellType",r),s=t(this,"itemHeight",r,n),o=e(this,n);this._nativeCall("describeItem",{index:i.index,type:o,height:s})}},createitem:{trigger:function(t){var e=new tabris.Cell;e._parent=this,this._addChild(e),this._nativeCall("addItem",{widget:e.cid});var r=this.get("initializeCell");"function"!=typeof r?console.warn("initializeCell callback missing"):r(e,i(this,t.type))}},populateitem:{trigger:function(t){var e=tabris(t.widget),i=this._getItem(this._items,t.index);e.set("itemIndex",t.index),i!==e.get("item")?e.set("item",i):e.trigger("change:item",e,i,{})}},select:{name:"selection",listen:function(t){this._nativeListen("selection",t)},trigger:function(t){var e=this._getItem(this._items,t.index);this.trigger("select",this,e,{index:t.index}),this.trigger("selection",{index:t.index,item:e})}},scroll:{trigger:function(t){this.trigger("scroll",this,t)}},"change:firstVisibleIndex":{listen:function(t){t?this._on("scroll",n):this._off("scroll",n)}},"change:lastVisibleIndex":{listen:function(t){t?this._on("scroll",s):this._off("scroll",s)}}},_setItems:function(t,e){this._items=t||[],this._triggerChangeEvent("items",this._items,e),this._needsReload=!0},_getItem:function(t,e){return t[e]},reveal:function(t){t=this._checkIndex(t),t>=0&&t<this._items.length&&this._nativeCall("reveal",{index:t})},refresh:function(t){return 0===arguments.length?void this._nativeCall("update",{reload:[0,this._items.length]}):(t=this._checkIndex(t),void(t>=0&&t<this._items.length&&this._nativeCall("update",{reload:[t,1]})))},insert:function(t,e){if(!Array.isArray(t))throw new Error("items is not an array");e=1===arguments.length?this._items.length:Math.max(0,Math.min(this._items.length,this._checkIndex(e))),Array.prototype.splice.apply(this._items,[e,0].concat(t)),this._adjustIndicies(e,t.length),this._nativeCall("update",{insert:[e,t.length]})},remove:function(t,e){if(t=this._checkIndex(t),1===arguments.length)e=1;else{if(!("number"==typeof e&&isFinite(e)&&e>=0))throw new Error("illegal remove count");e=Math.min(e,this._items.length-t)}t>=0&&t<this._items.length&&e>0&&(this._items.splice(t,e),this._adjustIndicies(t+e,-e),this._nativeCall("update",{remove:[t,e]}))},_reload:function(){this._needsReload&&(this._nativeCall("reload",{items:this._items.length}),delete this._needsReload);
},_checkIndex:function(t){if("number"!=typeof t||!isFinite(t))throw new Error("illegal index");return 0>t?t+this._items.length:t},_adjustIndicies:function(t,e){for(var i=this._children||[],r=0;r<i.length;r++){var n=i[r],s=n.get("itemIndex");s>=t&&n.set("itemIndex",s+e)}}});var n=r("firstVisibleIndex"),s=r("lastVisibleIndex");tabris.registerWidget("Cell",{_type:"rwt.widgets.Composite",_supportsChildren:!0,dispose:function(){console.warn("CollectionView cells are container-managed, they cannot be disposed of")}})}(),tabris.registerWidget("Composite",{_type:"rwt.widgets.Composite",_supportsChildren:!0}),tabris.load(function(){"UWP"===device.platform&&tabris.registerWidget("Drawer",{_type:"tabris.Drawer",_supportsChildren:!0,_create:function(){return tabris.ui._setCurrentDrawer(this),this._super("_create",arguments),this._setParent(tabris.ui),this},open:function(){return this._nativeCall("open",{}),this},close:function(){return this._nativeCall("close",{}),this},dispose:function(){tabris.ui._setCurrentDrawer(null),this._super("dispose",arguments)}})}),tabris.load(function(){"UWP"!==device.platform&&(tabris.registerWidget("_Drawer",{_type:"tabris.Drawer"}),tabris.registerWidget("Drawer",{_type:"rwt.widgets.Composite",_supportsChildren:!0,_create:function(t){return tabris.ui._setCurrentDrawer(this),this._drawer=tabris.create("_Drawer",{}),this._super("_create",[r.extend(t,{layoutData:{left:0,right:0,top:0,bottom:0}})].concat(r.drop(arguments))),this._setParent(tabris.ui),this},open:function(){return this._drawer._nativeCall("open",{}),this},close:function(){return this._drawer._nativeCall("close",{}),this},dispose:function(){tabris.ui._setCurrentDrawer(null),this._drawer.dispose(),this._super("dispose",arguments)}}))}),tabris.registerWidget("ImageView",{_type:"tabris.ImageView",_properties:{image:{type:"image","default":null},scaleMode:{type:["choice",["auto","fit","fill","stretch","none"]],"default":"auto"}}}),function(){tabris.registerWidget("_Page",{_type:"tabris.Page",_properties:{image:{type:"image",access:{set:function(t,e){this._image=e,this._nativeSet("image",e)},get:function(){return this._image}}},title:{type:"string","default":""},topLevel:"boolean",control:"proxy",parent:"proxy",style:"any"}});var t={access:{set:function(t,e){this._page.set(t,e)},get:function(t){return this._page.get(t)}}},e={title:t,image:t,style:t,topLevel:t,layoutData:{access:{set:function(){},get:function(){}}}};tabris.registerWidget("Page",{_type:"rwt.widgets.Composite",_supportsChildren:!0,_properties:e,_create:function(t){return this._super("_create",[r.omit(t,Object.keys(e))].concat(r.drop(arguments))),this._nativeSet("layoutData",{left:0,right:0,top:0,bottom:0}),this._nativeSet("parent",tabris.ui._shell.cid),this._page=tabris.create("_Page",r.extend(r.pick(t,Object.keys(e)),{parent:tabris.ui,control:this})),this._page.widget=this,this._parent=tabris.ui,tabris.ui._addChild(this),this._on("dispose",function(){tabris.ui._pageClosed(this),this._page.dispose()}),this._isTopLevel=!!t.topLevel,this},open:function(){return tabris.ui._pageOpened(this),this},close:function(){this.dispose()}})}(),function(){function t(t){return tabris.CollectionView.prototype._create.call(this,r.extend({items:n(),initializeCell:s,itemHeight:"iOS"===device.platform?40:48,layoutData:{left:0,top:0,right:0,bottom:0}},t)),this.on("select",function(t,e){e instanceof tabris.Page&&(tabris.ui.drawer&&tabris.ui.drawer.close(),e.open())}),tabris.ui.on("addchild",e,this).on("removechild",i,this),this.on("dispose",function(){tabris.ui.off("addchild",e),tabris.ui.off("removechild",i)}),this}function e(t,e){e instanceof tabris.Page&&e.get("topLevel")&&this.insert([e])}function i(t,e){var i=this.get("items").indexOf(e);-1!==i&&this.remove(i)}function n(){return tabris.ui.children("Page").toArray().filter(function(t){return t.get("topLevel")})}function s(t){new tabris.Composite({layoutData:{left:0,right:0,bottom:0,height:1},background:"#bbb"}).appendTo(t);var e=new tabris.ImageView({layoutData:{left:10,top:10,bottom:10}}).appendTo(t),i=new tabris.TextView({layoutData:{left:72,centerY:0},font:"iOS"===device.platform?"17px .HelveticaNeueInterface-Regular":"14px Roboto Medium",textColor:"iOS"===device.platform?"rgb(22, 126, 251)":"#212121"}).appendTo(t);t.on("change:item",function(t,r){e.set("image",r.get("image")),i.set("text",r.get("title"))})}tabris.PageSelector=function(e){var i=new tabris.CollectionView;return t.call(i,e),i},tabris.PageSelector.prototype.type="PageSelector"}(),function(){function t(t,e,i){t._triggerChangeEvent("selection",t._getItem(e),r.extend({index:e},i))}tabris.registerWidget("Picker",{_type:"rwt.widgets.Combo",_initProperties:{selectionIndex:0},_events:{select:{name:"Selection",alias:"change:selectionIndex",trigger:function(t){this._triggerChangeEvent("selectionIndex",t.selectionIndex),this.trigger("select",this,this._getItem(t.selectionIndex),{index:t.selectionIndex})}},"change:selection":{listen:function(e){e?this._on("change:selectionIndex",t):this._off("change:selectionIndex",t)}}},_properties:{items:{type:"array","default":function(){return[]},access:{set:function(t,e,i){this._storeProperty(t,e,i);var r=this.get("itemText");this._nativeSet("items",e.map(r))}}},itemText:{type:"function","default":function(){return function(t){return null==t?"":t.toString()}},access:{set:function(t,e,i){this._storeProperty(t,e,i)}}},selectionIndex:{type:"natural",access:{set:function(t,e,i){this._nativeSet(t,e),this._triggerChangeEvent(t,e,i)}}},selection:{access:{set:function(t,e,i){var r=this._getItemIndex(e);-1!==r?this.set("selectionIndex",r,i):console.warn("Could not set picker selection "+e+": item not found")},get:function(){return this._getItem(this.get("selectionIndex"))}}}},_setProperties:function(t,e){var i=["items","selection","selectionIndex"];this._super("_setProperties",[r.omit(t,i)].concat(r.drop(arguments))),i.forEach(function(i){i in t&&this._setProperty(i,t[i],e)},this)},_getItem:function(t){return this.get("items")[t]},_getItemIndex:function(t){return this.get("items").indexOf(t)}})}(),tabris.registerWidget("ProgressBar",{_type:"rwt.widgets.ProgressBar",_properties:{minimum:{type:"integer","default":0},maximum:{type:"integer","default":100},selection:{type:"integer","default":0},state:{type:["choice",["normal","paused","error"]],"default":"normal"}}}),tabris.registerWidget("RadioButton",{_type:"rwt.widgets.Button",_initProperties:{style:["RADIO"]},_events:{select:{name:"Selection",alias:"change:selection",trigger:function(t){this._triggerChangeEvent("selection",t.selection),this.trigger("select",this,t.selection,{})}}},_properties:{text:{type:"string","default":""},selection:{type:"boolean",nocache:!0}}}),tabris.registerWidget("_ScrollBar",{_type:"rwt.widgets.ScrollBar",_events:{Selection:!0},_properties:{style:"any"}}),tabris.registerWidget("ScrollView",{_type:"rwt.widgets.ScrolledComposite",_supportsChildren:!0,_properties:{direction:{type:["choice",["horizontal","vertical"]],"default":"vertical"},scrollX:{type:"number",access:{set:function(t,e){"horizontal"===this.get("direction")&&this._nativeSet("origin",[e,0])},get:function(){return"horizontal"===this.get("direction")?this._nativeGet("origin")[0]:0}}},scrollY:{type:"number",access:{set:function(t,e){"vertical"===this.get("direction")&&this._nativeSet("origin",[0,e])},get:function(){return"vertical"===this.get("direction")?this._nativeGet("origin")[1]:0}}}},_events:{scroll:{listen:function(t){t?this._scrollBar.on("Selection",this._scrollBarListener,this):this._scrollBar.off("Selection",this._scrollBarListener,this)},trigger:function(t){this.trigger(this,t,{})}}},_create:function(t){this._super("_create",arguments);var e="horizontal"===t.direction?["H_SCROLL"]:["V_SCROLL"];return this._nativeSet("style",e),this._scrollBar=tabris.create("_ScrollBar",{style:"horizontal"===t.direction?["HORIZONTAL"]:["VERTICAL"]}),this._scrollBar._nativeSet("parent",this.cid),this._composite=new tabris.Composite,this._composite._nativeSet("parent",this.cid),this._nativeSet("content",this._composite.cid),this},_scrollBarListener:function(){var t=this._nativeGet("origin");this.trigger("scroll",this,{x:t[0],y:t[1]})},_getContainer:function(){return this._composite}}),tabris.registerWidget("ScrollComposite",tabris.ScrollView),tabris.registerWidget("SearchAction",{_type:"tabris.SearchAction",_properties:{image:{type:"image","default":null},placementPriority:{type:["choice",{low:"LOW",high:"HIGH",normal:"NORMAL"}],access:{get:function(){var t=this._nativeGet("placementPriority");return t?t.toLowerCase():t}}},title:{type:"string","default":""},proposals:{"default":function(){return[]}},text:{type:"string",access:{set:function(t,e,i){this._nativeSet("query",e),this._triggerChangeEvent(t,e,i)},get:function(){return this._nativeGet("query")}}},message:{type:"string","default":""}},_events:{input:{name:"Modify",listen:function(t){this._nativeListen("Modify",t)},trigger:function(t){this.trigger("input",this,t.query,{})}},accept:{name:"Search",trigger:function(t){this.trigger("accept",this,t.query,{})}},select:{name:"Selection",trigger:function(t){this.trigger("select",this,t)}}},_create:function(){return this._super("_create",arguments),tabris.ui.append(this),this},open:function(){return this._nativeCall("open",{}),this}}),tabris.registerWidget("Slider",{_type:"rwt.widgets.Scale",_events:{select:{name:"Selection",alias:"change:selection",trigger:function(t){this._triggerChangeEvent("selection",t.selection),this.trigger("select",this,t.selection,{})}}},_properties:{minimum:{type:"integer","default":0},maximum:{type:"integer","default":100},selection:{type:"integer",nocache:!0}}}),tabris.registerWidget("Switch",{_type:"tabris.Switch",_events:{select:{name:"toggle",alias:"change:selection",trigger:function(t){this._triggerChangeEvent("selection",t.checked),this.trigger("select",this,t.checked,{})}}},_properties:{selection:{type:"boolean",access:{get:function(){return this._nativeGet("checked")},set:function(t,e,i){this._nativeSet("checked",e),this._triggerChangeEvent(t,e,i)}}},thumbOnColor:{type:"color"},thumbOffColor:{type:"color"},trackOnColor:{type:"color"},trackOffColor:{type:"color"}}}),tabris.load(function(){"UWP"===device.platform&&(tabris.registerWidget("TabFolder",{_type:"tabris.TabFolder",_properties:{paging:{type:"boolean","default":!1},selection:{type:"proxy","default":null}},_supportsChildren:function(t){return"Tab"===t.type},_events:{select:{alias:"change:selection",trigger:function(t){var e=tabris(t.selection);this._triggerChangeEvent("selection",e),this.trigger("select",this,e,{})}}}}),tabris.registerWidget("Tab",{_type:"tabris.Tab",_properties:{title:{type:"string","default":""},image:{type:"image","default":null},badge:{type:"string","default":""}},_supportsChildren:!0,_setParent:function(t){if(!(t instanceof tabris.TabFolder))throw new Error("Tab must be a child of TabFolder");tabris.Widget.prototype._setParent.call(this,t)}}))}),tabris.load(function(){function t(t){return t instanceof tabris.Tab}function e(e){return!t(e)}if("UWP"!==device.platform){var i=["title","badge","image","visible"];tabris.registerWidget("_TabItem",{_type:"rwt.widgets.TabItem",_properties:{title:{access:{set:function(t,e,i){this._nativeSet("text",e),this._triggerChangeEvent(t,e,i)}}},image:{nocache:!0},badge:{nocache:!0},control:"any",index:"any"}}),tabris.registerWidget("TabFolder",{_type:"rwt.widgets.TabFolder",_create:function(t){return this._super("_create",arguments),"top"===t.tabBarLocation?this._nativeSet("style",["TOP"]):"bottom"===t.tabBarLocation&&this._nativeSet("style",["BOTTOM"]),this},_properties:{paging:{type:"boolean","default":!1,access:{set:function(t,e,i){this._nativeSet("data",{paging:e}),this._storeProperty(t,e,i)}}},selection:{access:{set:function(t,e,i){return e instanceof tabris.Tab?e._isDisposed?void console.warn("Can not set TabFolder selection to disposed Tab"):(this._nativeSet("selection",e._tabItem.cid),void this._triggerChangeEvent("selection",e,i)):void console.warn("Can not set TabFolder selection to "+e)},get:function(){var t=this._nativeGet("selection");return t?tabris(t)._tab:null}}},tabBarLocation:{type:["choice",["top","bottom","hidden","auto"]],"default":"auto"}},_supportsChildren:function(t){return"Tab"===t.type||"_TabItem"===t.type},_events:{select:{name:"Selection",alias:"change:selection",trigger:function(t){var e=tabris(t.selection)._tab;this._triggerChangeEvent("selection",e),this.trigger("select",this,e,{})}}},_getItems:function(){return this._children?this._children.filter(e):new tabris.ProxyCollection},_getSelectableChildren:function(){return this._children?this._children.filter(t):void 0}}),tabris.registerWidget("Tab",{_type:"rwt.widgets.Composite",_properties:{title:{type:"string","default":"",access:{set:function(t,e,i){this._tabItem&&this._tabItem._setProperty("title",e),this._storeProperty(t,e,i)}}},image:{type:"image","default":null,access:{set:function(t,e,i){this._tabItem&&this._tabItem._setProperty("image",e),this._storeProperty(t,e,i)}}},badge:{type:"string","default":"",access:{set:function(t,e,i){this._tabItem&&this._tabItem._setProperty("badge",e),this._storeProperty(t,e,i)}}},visible:{type:"boolean","default":!0,access:{set:function(t,e,i){this._tabItem&&this._tabItem._setProperty("visibility",e),this._storeProperty(t,e,i)}}}},_supportsChildren:!0,_setParent:function(t){if(!(t instanceof tabris.TabFolder))throw new Error("Tab must be a child of TabFolder");tabris.Widget.prototype._setParent.call(this,t),this._tabItem=tabris.create("_TabItem",r.extend({control:this.cid,index:t._getItems().length},this._getItemProps())).appendTo(t),this._tabItem._tab=this,this._on("dispose",this._tabItem.dispose,this._tabItem)},_getItemProps:function(){for(var t={},e=0;e<i.length;e++){var r=i[e];void 0!==this._getStoredProperty(r)&&(t[r]=this._getStoredProperty(r))}return t}})}}),tabris.registerWidget("TextInput",{_type:"tabris.TextInput",_events:{focus:{trigger:function(){this.trigger("focus",this)}},blur:{trigger:function(){this.trigger("blur",this)}},accept:{trigger:function(t){this.trigger("accept",this,t.text,{})}},input:{name:"modify",alias:"change:text",trigger:function(t){this._triggerChangeEvent("text",t.text),this.trigger("input",this,t.text,{})}}},_properties:{type:["choice",["default","password","search","multiline"]],text:{type:"string",nocache:!0},message:{type:"string","default":""},editable:{type:"boolean","default":!0},alignment:{type:["choice",["left","center","right"]],"default":"left"},autoCorrect:{type:"boolean","default":!1},autoCapitalize:{type:"boolean","default":!1},keyboard:{type:["choice",["ascii","decimal","email","number","numbersAndPunctuation","phone","url","default"]],"default":"default"}}}),tabris.registerWidget("TextView",{_type:"tabris.TextView",_properties:{alignment:{type:["choice",["left","right","center"]],"default":"left"},markupEnabled:{type:"boolean","default":!1},maxLines:{type:["nullable","natural"],"default":null,access:{set:function(t,e,i){this._nativeSet(t,0>=e?null:e),this._storeProperty(t,e,i)}}},text:{type:"string","default":""}}}),tabris.registerWidget("ToggleButton",{_type:"rwt.widgets.Button",_initProperties:{style:["TOGGLE"]},_events:{select:{name:"Selection",alias:"change:selection",trigger:function(t){this._triggerChangeEvent("selection",t.selection),this.trigger("select",this,t.selection,{})}}},_properties:{text:{type:"string","default":""},image:{type:"image","default":null},selection:{type:"boolean",nocache:!0},alignment:{type:["choice",["left","right","center"]],"default":"center"}}}),tabris.registerWidget("Video",{_type:"tabris.widgets.Video",_initProperties:{controls_visible:!0,repeat:!1},_properties:{url:"string"}}),tabris.registerWidget("WebView",{_type:"rwt.widgets.Browser",_events:{navigate:{trigger:function(t,e){var i=!1;return t.preventDefault=function(){i=!0},this.trigger(e,this,t),i}},load:{name:"Progress",trigger:function(){this.trigger("load",this)}}},_properties:{url:{type:"string",nocache:!0},html:{type:"string",nocache:!0}}})}();